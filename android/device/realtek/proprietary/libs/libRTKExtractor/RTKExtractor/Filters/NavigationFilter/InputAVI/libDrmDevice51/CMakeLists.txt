INCLUDE(common.mk.txt)

SET(SRCS )
FILE(GLOB SRCS1 *.c)
SET(SRCS ${SRCS} ${SRCS1})

FILE(GLOB SRCS1 crypto/*.c)
SET(SRCS ${SRCS} ${SRCS1})

FILE(GLOB SRCS1 crypto/reference/*.c)
SET(SRCS ${SRCS} ${SRCS1})

FILE(GLOB SRCS1 local/Reference/*.c)
SET(SRCS ${SRCS} ${SRCS1})

message(${SRCS})

SET(INCLUDES ${INCLUDES} "local")
SET(INCLUDES ${INCLUDES} "common")
SET(INCLUDES ${INCLUDES} "crypto")
SET(INCLUDES ${INCLUDES} "crypto/reference")
SET(INCLUDES ${INCLUDES} "local/Reference/")
SET(INCLUDES ${INCLUDES} "./")

IF(DIVX_PROFILE STREQUAL HOME_THEATER)
	SET(DEFINES ${DEFINES} " -DDIVX_HOME_THEATER")
ELSE(DIVX_PROFILE STREQUAL HOME_THEATER)
    IF(DIVX_PROFILE STREQUAL DIVX_ULTRA)
     SET(DEFINES ${DEFINES} " -DDIVX_ULTRA")
    ELSE(DIVX_PROFILE STREQUAL DIVX_ULTRA)
	IF(DIVX_PROFILE STREQUAL DIVX_HD)
              SET(DEFINES ${DEFINES} " -DDIVX_HD")
        ENDIF(DIVX_PROFILE STREQUAL DIVX_HD)	
    ENDIF(DIVX_PROFILE STREQUAL DIVX_ULTRA)
ENDIF(DIVX_PROFILE STREQUAL HOME_THEATER)

SET(DEFINES ${DEFINES} " -DDIVXINT_NATIVE_64BIT -DDRM_HARDWARE_SIMULATED -DDRM_GO_LIVE_BASEKEYS")

SET(CFLAGS ${CFLAGS} " -g ${DEFINES}")
SET(CXXFLAGS ${CXXFLAGS} " -g -DLINUX ${DEFINES}")

SET(LDFLAGS ${LDFLAGS} " -g")


SET(LIBNAME DrmDevice)
SET(LIBRARY_OUTPUT_PATH ${LIB_DIR})

#message(${INCLUDES})
#message(${CFLAGS})
INCLUDE_DIRECTORIES(${INCLUDES})
ADD_DEFINITIONS(${CFLAGS})
ADD_LIBRARY(${LIBNAME} ${SRCS})
