INCLUDE(../../../../../include/config.txt)
SET(LIBNAME HttpIOPlugin)
SET(LIBRARY_OUTPUT_PATH ../../../../../lib/)
SET(rm " /bin/rm -f")
SET(CC " ${MYCC}")
SET(LINK " -=LINK=-")
SET(DEFS )
SET(AR " ${MYAR} cq")
SET(RANLIB " ${MYRANLIB}")

SET(INCLUDES ${INCLUDES} " ${CMAKE_CURRENT_SOURCE_DIR}/.")
SET(INCLUDES ${INCLUDES} " ${CMAKE_CURRENT_SOURCE_DIR}/../../../../Include")
SET(INCLUDES ${INCLUDES} " ${CMAKE_CURRENT_SOURCE_DIR}/../../../../Platform_Lib/HTTPC/src")
SET(INCLUDES ${INCLUDES} " ${CMAKE_CURRENT_SOURCE_DIR}/../../../../../../common/IPC/include")
SET(INCLUDES  ${INCLUDES} " ${CMAKE_CURRENT_SOURCE_DIR}/../../../../../../common/IPC/generate/include/system")

SET(DEFINES ${DEFINES} " ${DEFS} -DSYS_UNIX=1 -DHAVE_STRING_H -DRDDEBUG -DINPUT_USE_IO_PLUGIN")
SET(CFLAGS " ${DEFINES} ${COMPILE_OPT}")
#SET(LIBNAME ../../../../../lib/libHttpIOPlugin.a)

IF(APCFG_FLAGS MATCHES "APCFG_ASYNC_HTTPIOPLUGIN")
SET(SRCS httpBufferThread.c HttpIOPlugin_asy.c TranscodeIOPlugin.c io_helper.c)
SET(OBJS httpBufferThread.o HttpIOPlugin_asy.o TranscodeIOPlugin.o io_helper.o)
ELSE(APCFG_FLAGS MATCHES "APCFG_ASYNC_HTTPIOPLUGIN")
IF(APCFG_FLAGS MATCHES "APCFG_MODULE_IMS")
SET(SRCS HttpIOPlugin.c TranscodeIOPlugin.c io_helper.c)
SET(OBJS HttpIOPlugin.o TranscodeIOPlugin.o io_helper.o)
ELSE(APCFG_FLAGS MATCHES "APCFG_MODULE_IMS")
IF(APCFG_FLAGS MATCHES "APCFG_APP_HTTPCLIENT")
SET(SRCS HttpIOPlugin.c TranscodeIOPlugin.c io_helper.c)
SET(OBJS HttpIOPlugin.o TranscodeIOPlugin.o io_helper.o)
ELSE(APCFG_FLAGS MATCHES "APCFG_APP_HTTPCLIENT")
SET(SRCS HttpIOPlugin_empty.c TranscodeIOPlugin.c io_helper.c)
SET(OBJS HttpIOPlugin_empty.o TranscodeIOPlugin.o io_helper.o)
ENDIF(APCFG_FLAGS MATCHES "APCFG_APP_HTTPCLIENT")

ENDIF(APCFG_FLAGS MATCHES "APCFG_MODULE_IMS")

ENDIF(APCFG_FLAGS MATCHES "APCFG_ASYNC_HTTPIOPLUGIN")

INCLUDE_DIRECTORIES(${INCLUDES})
ADD_DEFINITIONS(${CFLAGS} ${DEBUGFLAG} ${WARNING})
ADD_LIBRARY(${LIBNAME} ${SRCS})

string(REGEX REPLACE  ";" " " APCFG_DVR  ${APCFG_DVR})
string(REGEX REPLACE  ";" " " CHIP_MODEL_DEFS ${CHIP_MODEL_DEFS})
string(REGEX REPLACE  ";" " " APCFG_DEFS ${APCFG_DEFS})
#string(REGEX REPLACE  ";" " " BUILD_OPTIONS ${BUILD_OPTIONS})
string(REGEX REPLACE  ";" " " DEFINES ${DEFINES})
string(REGEX REPLACE  ";" " " APCFG_FLAGS ${APCFG_FLAGS})
