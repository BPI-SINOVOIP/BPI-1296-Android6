# ----------------------------------------------------------------------
#
# This makefile has been automatically generated by WinGDB 2.2, build 1191
# Do not edit.
#
# Project: jpurun
#
# ----------------------------------------------------------------------

export ARCH=arm
export CROSS_TARGET = /home/fuchunyang/toolchain/arm-2010q1/bin/arm-none-linux-gnueabi-
export CROSS_COMPILE = /home/fuchunyang/toolchain/arm-2010q1/bin/arm-none-linux-gnueabi-
export CC=$(CROSS_COMPILE)gcc
export AR=$(CROSS_COMPILE)ar
export CXX=${CROSS_COMPILE}g++
export AS=${CROSS_COMPILE}as
export LD=${CROSS_COMPILE}ld
export RANLIB=${CROSS_COMPILE}ranlib
export READELF=${CROSS_COMPILE}readelf
export STRIP=${CROSS_COMPILE}strip


CFLAGS = -g -I./jpuapi -I./include
ARFLAGS = cru
LDFLAGS = -lpthread -lm 
LDFLAGS += -static
RESULT=jpurun
INTERMEDIATE_DIR=obj
DESTINATION_DIR=.

RM=rm -f
MKDIR=mkdir -p
INTERMEDIATE_DIR_MK=$(INTERMEDIATE_DIR)
DESTINATION_DIR_MK=$(DESTINATION_DIR)

VPATH= $(INTERMEDIATE_DIR):src:jdi:jdi/linux:jpuapi

SOURCES= main.c jpurun.c mixer.c jpuhelper.c jpulog.c

OBJECTNAMES=$(patsubst %.c,%.o,$(patsubst %.cpp,%.o,$(SOURCES)))
OBJECTPATHS=$(addprefix $(INTERMEDIATE_DIR)/,$(OBJECTNAMES))



JPUAPI_RESULT=libjpu.so
JPUAPI_SOURCES = jdi.c jpuapi.c jpuapifunc.c mm.c

JPUAPI_OBJECTNAMES=$(patsubst %.c,%.o,$(patsubst %.cpp,%.o,$(JPUAPI_SOURCES)))
JPUAPI_OBJECTPATHS=$(addprefix $(INTERMEDIATE_DIR)/,$(JPUAPI_OBJECTNAMES))



all: $(DESTINATION_DIR)/$(JPUAPI_RESULT) $(DESTINATION_DIR)/$(RESULT)
	@echo "build OK!!!"

# ./jpurun
$(DESTINATION_DIR)/$(RESULT): $(OBJECTNAMES) $(JPUAPI_OBJECTNAMES)
	@echo ""
	@echo "build $(DESTINATION_DIR)/$(RESULT)"
	@echo ""
	$(CC) $(CFLAGS) $(SYSROOTFLAGS) $(OBJECTPATHS) $(JPUAPI_OBJECTPATHS) -o $@ $(LDFLAGS)

# ./libjpu.so
$(DESTINATION_DIR)/$(JPUAPI_RESULT): $(JPUAPI_OBJECTNAMES)
	@echo ""
	@echo "build $(DESTINATION_DIR)/$(JPUAPI_RESULT)"
	@echo ""
	$(CC) -shared -s -o $@ $(JPUAPI_OBJECTPATHS)
	


clean:
	$(RM) $(DESTINATION_DIR)/$(RESULT)
	$(RM) $(OBJECTPATHS)
	$(RM) $(DESTINATION_DIR)/$(JPUAPI_RESULT)
	$(RM) $(JPUAPI_OBJECTPATHS)

$(OBJECTNAMES): %.o: %.c
ifeq ("$(wildcard $(INTERMEDIATE_DIR) )","")
	-$(MKDIR) $(INTERMEDIATE_DIR_MK)
endif
	$(CC) $(CFLAGS) -c -o $(INTERMEDIATE_DIR)/$@ $<

$(JPUAPI_OBJECTNAMES): %.o: %.c
ifeq ("$(wildcard $(INTERMEDIATE_DIR) )","")
	-$(MKDIR) $(INTERMEDIATE_DIR_MK)
endif
	$(CC) $(CFLAGS) -fPIC -c -o $(INTERMEDIATE_DIR)/$@ $<
